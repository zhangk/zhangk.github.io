---
title: 移动硬盘中安装Debian
slug: c1f7d4156fea42dbb0fe008bc279dfb4
tags:
  - linux
date: 2025-08-05T07:45:32.290Z
---

## 1. 分区与格式化（在主机Linux上操作）

```bash
# 创建GPT分区表
sudo parted /dev/sdX  # 替换X为设备标识（如sda）
(parted) mklabel gpt
(parted) quit

# 创建EFI系统分区（1GB）
sudo parted /dev/sdX
(parted) mkpart primary fat32 1MiB 1025MiB
(parted) name 1 "EFI System"
(parted) set 1 esp on
(parted) print

# 创建根分区
(parted) mkpart primary ext4 1025MiB 100%
(parted) name 2 "Linux Root"
(parted) quit

# 格式化分区
sudo mkfs.vfat -F32 /dev/sdX1  # EFI分区
sudo mkfs.ext4 /dev/sdX2       # 根分区
```

## 2. 安装基本系统

```bash
sudo mkdir /mnt/debian
sudo mount /dev/sdX2 /mnt/debian
sudo debootstrap trixie /mnt/debian http://deb.debian.org/debian
```

## 3. Chroot配置系统

```bash
sudo mkdir -p /mnt/debian/boot/efi
sudo mount /dev/sdX1 /mnt/debian/boot/efi
sudo mount -t proc proc /mnt/debian/proc
sudo mount -t sysfs sys /mnt/debian/sys
sudo mount -o bind /dev /mnt/debian/dev
sudo chroot /mnt/debian
```

## 4. 更新软件源配置

编辑 `/etc/apt/sources.list`：

```conf
deb http://mirrors.aliyun.com/debian trixie main contrib non-free non-free-firmware
deb http://mirrors.aliyun.com/debian-security trixie-security main contrib non-free non-free-firmware
deb http://mirrors.aliyun.com/debian trixie-updates main contrib non-free non-free-firmware
```

## 5. 基础系统设置

```bash
# 设置时区和语言
ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
echo "en_US.UTF-8 UTF-8" > /etc/locale.gen
locale-gen
echo "LANG=en_US.UTF-8" > /etc/locale.conf

# 设置主机名
echo "debian" > /etc/hostname

# 安装核心组件
apt update
apt install -y linux-image-amd64 firmware-linux sudo grub-efi-amd64

# 配置initramfs
echo "MODULES=most" >> /etc/initramfs-tools/initramfs.conf
echo "COMPRESS=xz" >> /etc/initramfs-tools/initramfs.conf
update-initramfs -u -k all
```

## 6. 配置可移植性

```bash
# 安装通用驱动
apt install -y \
  firmware-realtek \
  firmware-intel-sound \
  firmware-misc-nonfree \
  dmraid \
  mdadm

# 配置fstab（使用UUID）
blkid /dev/sdX2  # 复制根分区UUID
blkid /dev/sdX1  # 复制EFI UUID
echo "UUID=YOUR_ROOT_UUID / ext4 defaults 0 1" > /etc/fstab
echo "UUID=YOUR_EFI_UUID /boot/efi vfat umask=0077 0 2" >> /etc/fstab
```

## 7. 安装GRUB

```bash
grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=Debian --removable
echo 'GRUB_DISABLE_OS_PROBER=true' >> /etc/default/grub
update-grub
```

## 8. 用户与网络

```bash
# 创建用户
adduser yourusername
usermod -aG sudo yourusername

# 配置SSH（可选）
apt install openssh-server
sed -i 's/#PasswordAuthentication yes/PasswordAuthentication yes/' /etc/ssh/sshd_config
```

## 9. 退出与清理

```bash
exit  # 退出chroot
sudo umount -R /mnt/debian
```

## 使用教程

### 启动步骤：

1. 插入SSD硬盘盒

2. 开机按启动菜单键（F12/ESC/DEL）

3. 选择 `UEFI: USB DISK` 或 `Debian` 启动

### 首次登录：

```bash
login: yourusername
password: 您设置的密码
```

### 网络配置：

```bash
# 有线网络
sudo dhclient eth0

# WiFi连接
sudo ip link set wlan0 up
sudo apt install wpasupplicant
wpa_supplicant -i wlan0 -c <(wpa_passphrase "SSID" "password")
```

### 系统更新：

```bash
sudo apt update && sudo apt full-upgrade
```

### 安装KDE桌面：

```bash
sudo apt update && sudo apt upgrade -y
sudo apt install task-kde-desktop sddm -y
sudo systemctl enable sddm
sudo reboot
```

> 安装过程可能需要15-30分钟
