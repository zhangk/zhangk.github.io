---
title: Ubuntu SSHFS 挂载服务器目录指南
slug: a2ecaf44abbe4e069a2ce7d8e3434937
tags:
  - linux
  - ssh
date: 2025-06-10T03:50:16.343Z
---

## 📦 安装 SSHFS

```bash
sudo apt update
sudo apt install sshfs
```

## 📂 挂载服务器目录

### 1. 创建本地挂载点

```bash
mkdir -p ~/RemoteServer  # 推荐在用户目录下创建
# 或
mkdir -p /path/to/custom/mountpoint
```

### 2. 挂载远程目录

```bash
sshfs [用户名]@[服务器IP]:[远程路径] [本地挂载点]
```

**示例**：

```bash
sshfs zhangk@192.168.0.168:/home/zhangk /home/zhangk/work/168/
```

**执行流程**：

1. 输入命令后按回车

2. 输入服务器用户密码

3. 挂载成功（无错误提示）

***

## 🔍 验证挂载

```bash
# 查看挂载状态
df -hT | grep sshfs

# 列出挂载点内容
ls /home/zhangk/work/168/
```

**成功标志**：

- 能看到远程服务器文件列表

- `df` 命令显示挂载点容量信息

***

## ⏏️ 卸载挂载点

```bash
# 标准卸载
fusermount -u /挂载点路径

# 强制卸载（当标准卸载失败时）
sudo umount -l /挂载点路径
```

**示例**：

```bash
fusermount -u /home/zhangk/work/168/
```

***

## 🔄 设置免密码挂载

### 1. 生成 SSH 密钥对

```bash
ssh-keygen -t rsa -b 4096
```

### 2. 复制公钥到服务器

```bash
ssh-copy-id zhangk@192.168.0.168
```

### 3. 测试无密码登录

```bash
ssh zhangk@192.168.0.168
```

### 4. 免密码挂载

```bash
sshfs -o IdentityFile=~/.ssh/id_rsa zhangk@192.168.0.168:/home/zhangk /home/zhangk/work/168/
```

***

## 🔧 高级挂载选项

### 常用参数

```bash
sshfs -o [选项] user@host:远程路径 本地路径
```

| 选项                     | 说明           |
| ---------------------- | ------------ |
| `-o reconnect`         | 自动重连（网络中断恢复） |
| `-o compression=yes`   | 启用压缩（节省带宽）   |
| `-o cache_timeout=120` | 缓存超时（秒）      |
| `-o allow_other`       | 允许其他用户访问     |
| `-o uid=1000,gid=1000` | 设置文件所有者      |
| `-o follow_symlinks`   | 跟随符号链接       |

### 示例：带参数挂载

```bash
sshfs -o reconnect,compression=yes,uid=$(id -u),gid=$(id -g) \
zhangk@192.168.0.168:/home/zhangk /home/zhangk/work/168/
```

***

## ⚙️ 设置开机自动挂载

### 1. 编辑 `/etc/fstab`

```bash
sudo nano /etc/fstab
```

### 2. 添加配置行

```bash
user@host:/remote/path /local/mountpoint fuse.sshfs defaults,_netdev,IdentityFile=/home/user/.ssh/id_rsa 0 0
```

**示例**：

```bash
zhangk@192.168.0.168:/home/zhangk /home/zhangk/work/168 fuse.sshfs defaults,_netdev,reconnect,uid=1000,gid=1000,IdentityFile=/home/zhangk/.ssh/id_rsa 0 0
```

### 3. 测试挂载

```bash
sudo mount -a
```

***

## ⚠️ 常见问题解决

### 问题：`fusermount: mount failed: Operation not permitted`

**解决**：

```bash
# 1. 将用户加入fuse组
sudo usermod -a -G fuse $USER

# 2. 重新登录或重启
```

### 问题：中文文件名乱码

**解决**：添加字符集参数

```bash
sshfs -o iocharset=utf8 user@host:/path /mountpoint
```

### 问题：连接超时或断开

**解决**：

```bash
# 1. 添加保活参数
sshfs -o ServerAliveInterval=15 user@host:/path /mountpoint

# 2. 使用autossh自动重连
sudo apt install autossh
autossh -M 0 -o "ServerAliveInterval 45" -o "ServerAliveCountMax 2" user@host sshfs :/path /mountpoint
```

### 问题：权限不足

**解决**：

```bash
# 挂载时指定本地用户ID
sshfs -o uid=$(id -u),gid=$(id -g) user@host:/path /mountpoint
```

***

## 💡 性能优化技巧

1. **启用缓存**：

   ```bash
   sshfs -o cache=yes user@host:/path /mountpoint
   ```

2. **增加缓存大小**：

   ```bash
   sshfs -o cache_timeout=240,entry_timeout=240 user@host:/path /mountpoint
   ```

3. **使用压缩传输**：

   ```bash
   sshfs -C user@host:/path /mountpoint
   ```

4. **禁用文件属性缓存**：

   ```bash
   sshfs -o direct_io user@host:/path /mountpoint
   ```

***

## 🔄 替代工具：SFTP-NetDrive (GUI)

1. 安装：

   ```bash
   sudo snap install sftpclient
   ```

2. 特点：

   - 图形界面操作

   - 支持书签管理

   - 断点续传

   - 拖拽操作

> **📌 最佳实践**
>
> - 生产环境使用密钥认证
>
> - 重要操作前先卸载
>
> - 定期检查挂载状态
>
> - 敏感数据使用加密挂载
