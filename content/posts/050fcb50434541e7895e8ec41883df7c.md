---
title: Ubuntu å®‰è£… imapsync é‚®ä»¶è¿ç§»å·¥å…·æŒ‡å—
slug: 050fcb50434541e7895e8ec41883df7c
tags:
  - linux
date: 2025-06-10T00:52:46.697Z
---

## åŠŸèƒ½è¯´æ˜Ž

imapsync æ˜¯ä¸“ä¸šçš„é‚®ä»¶è¿ç§»å·¥å…·ï¼Œæ”¯æŒï¼š

- IMAP é‚®ç®±ä¹‹é—´çš„é‚®ä»¶åŒæ­¥
- è·¨æœåŠ¡å™¨é‚®ä»¶è¿ç§»ï¼ˆå¦‚ Gmail â†’ Office 365ï¼‰
- ä¿ç•™åŽŸå§‹æ–‡ä»¶å¤¹ç»“æž„å’Œé‚®ä»¶çŠ¶æ€

***

## å®‰è£…æ­¥éª¤

### 1. å®‰è£…ä¾èµ–é¡¹

```bash
sudo apt update
sudo apt install -y libdigest-hmac-perl libencode-imaputf7-perl \
libfile-copy-recursive-perl libio-tee-perl libmail-imapclient-perl \
libterm-readkey-perl libunicode-string-perl libsys-meminfo-perl \
libregexp-common-perl libfile-tail-perl
```

> ðŸ’¡ è¿™äº› Perl æ¨¡å—æä¾›åŠ å¯†ã€ç¼–ç å’Œé‚®ä»¶å¤„ç†åŠŸèƒ½

### 2. ä¸‹è½½å¹¶å®‰è£… imapsync

```bash
# ä¸‹è½½æœ€æ–°ç‰ˆ
wget -N https://imapsync.lamiral.info/imapsync

# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x imapsync

# ç§»åŠ¨åˆ°ç³»ç»Ÿè·¯å¾„
sudo mv imapsync /usr/local/bin/
```

### 3. éªŒè¯å®‰è£…

```bash
imapsync --version
# åº”è¾“å‡ºç±»ä¼¼ï¼šimapsync 2.xx
```

***

## åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹

```bash
imapsync \
  --host1 source.imap.com --user1 user@domain.com --password1 "pwd1" \
  --host2 target.imap.com --user2 user@domain.com --password2 "pwd2" \
  --automap --syncinternaldates --addheader
```

### å¸¸ç”¨å‚æ•°ï¼š

- `--automap`ï¼šè‡ªåŠ¨åŒ¹é…æ–‡ä»¶å¤¹

- `--syncinternaldates`ï¼šä¿ç•™åŽŸå§‹é‚®ä»¶æ—¥æœŸ

- `--exclude "Spam|Trash"`ï¼šæŽ’é™¤ç‰¹å®šæ–‡ä»¶å¤¹

- `--dry`ï¼šè¯•è¿è¡Œï¼ˆä¸å®žé™…è¿ç§»ï¼‰

***

## ðŸ›  è¿›é˜¶é…ç½®

### 1. è¿ç§»å¤§é‡é‚®ä»¶ï¼ˆå†…å­˜ä¼˜åŒ–ï¼‰

```bash
imapsync ... \
  --split1 100 --split2 100 \
  --maxsize 10_000_000 \
  --useuid
```

### 2. å®šæ—¶å¢žé‡åŒæ­¥ï¼ˆcrontabï¼‰

```bash
# æ¯å‘¨æ—¥å‡Œæ™¨3ç‚¹åŒæ­¥
0 3 * * 0 imapsync [å‚æ•°] >> ~/imapsync.log 2>&1
```

### 3. æŽ’é™¤å·²è¿ç§»é‚®ä»¶

```bash
--skipcrossduplicates --delete2duplicates
```

***

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¯†ç å®‰å…¨**ï¼š

   ```bash
   # ä½¿ç”¨ä¸“ç”¨å¯†ç æ–‡ä»¶æ›´å®‰å…¨
   --passfile1 /path/to/pwd1
   ```

2. **è¿ç§»ä¸­æ–­æ¢å¤**ï¼š

   ```bash
   --resume /path/to/resume_file
   ```

3. **Gmail ç‰¹æ®Šé…ç½®**ï¼š

   ```bash
   --ssl1 --ssl2 --port1 993 --port2 993
   ```

> ðŸ”— **å®˜æ–¹æ–‡æ¡£**ï¼š[imapsync.lamiral.info](https://imapsync.lamiral.info/)
