---
title: Android 15 å±è”½æŒ‡å®šåº”ç”¨å®‰è£…çš„ä¿®æ”¹è®°å½•
slug: cb9b8e731d224f2880e20727fe932628
tags:
  - android
date: 2026-01-27T09:37:48.900Z
---

# Android 15 å±è”½æŒ‡å®šåº”ç”¨å®‰è£…çš„ä¿®æ”¹è®°å½•

Â 

### âœï¸ ä¿®æ”¹ç›®çš„

åœ¨ Android 15 ç³»ç»Ÿä¸­ï¼Œå®ç°å¯¹ç‰¹å®šåº”ç”¨çš„å®‰è£…å±è”½ï¼Œä½¿å…¶æ— æ³•é€šè¿‡æ‰‹åŠ¨æ–¹å¼å®‰è£…ã€‚

***

### ğŸ“„ ä¿®æ”¹æ–‡ä»¶

system/frameworks/base/services/core/java/com/android/server/pm/PackageInstallerService.java

***

### ğŸ”§ ä¿®æ”¹å†…å®¹

```diff
--- a/system/frameworks/base/services/core/java/com/android/server/pm/PackageInstallerService.java
+++ b/system/frameworks/base/services/core/java/com/android/server/pm/PackageInstallerService.java
@@ -672,12 +672,28 @@ public class PackageInstallerService extends IPackageInstaller.Stub implements
         }
     }
 
+    //kte zhangkai 2026-1-14, Block install action.
+    private boolean shouldBlockInstallation(SessionParams params) {
+        // æ£€æŸ¥åŒ…å
+        if (params.appPackageName != null) {
+            return params.appPackageName.contains("org.epcdiy.memory");
+        }
+        return false;
+    }
+    //kte zhangkai 2026-1-14, Block install action.
+
     int createSessionInternal(SessionParams params, String installerPackageName,
             String installerAttributionTag, int callingUid, int userId)
             throws IOException {
         final Computer snapshot = mPm.snapshotComputer();
         snapshot.enforceCrossUserPermission(callingUid, userId, true, true, "createSession");
 
+	//kte zhangkai 2026-1-14, Block install action.
+        if (shouldBlockInstallation(params)) {
+            throw new SecurityException("Installation of this package is not allowed");
+        }
+	//kte zhangkai 2026-1-14, Block install action.
+
         if (mPm.isUserRestricted(userId, UserManager.DISALLOW_INSTALL_APPS)) {
             throw new SecurityException("User restriction prevents installing");
         }

```

***

### âš™ï¸ å®ç°é€»è¾‘è¯´æ˜

- åœ¨åˆ›å»ºå®‰è£…ä¼šè¯æ—¶ï¼Œç³»ç»Ÿä¼šè°ƒç”¨ `shouldBlockInstallation()` æ–¹æ³•æ£€æŸ¥åŒ…åã€‚

- è‹¥åŒ…ååŒ…å« `"org.epcdiy.memory"`ï¼Œåˆ™ä¼šæŠ›å‡º `SecurityException`ï¼Œé˜»æ­¢å®‰è£…æµç¨‹ã€‚

- è¯¥æ£€æŸ¥ä»…é’ˆå¯¹æ‰‹åŠ¨å®‰è£…åœºæ™¯ï¼Œç³»ç»Ÿé¢„è£…æˆ–ç‰¹æƒå®‰è£…å¯èƒ½ä¸å—å½±å“ã€‚

***

### ğŸ§ª é€‚ç”¨åœºæ™¯

- ä¼ä¸šå®šåˆ¶è®¾å¤‡ä¸­å±è”½éæˆæƒåº”ç”¨ã€‚

- æ•™è‚²æˆ–å…¬å…±è®¾å¤‡ä¸­ç¦æ­¢å®‰è£…æŒ‡å®šæ¸¸æˆæˆ–å·¥å…·ã€‚

- å®‰å…¨åœºæ™¯ä¸‹é˜²æ­¢ç”¨æˆ·å®‰è£…æ½œåœ¨é£é™©åº”ç”¨ã€‚

***

### ğŸ“Œ å¤‡æ³¨

- å½“å‰å±è”½è§„åˆ™ä¸ºç¡¬ç¼–ç ï¼Œåç»­å¯æ‰©å±•ä¸ºä»é…ç½®æ–‡ä»¶ä¸­è¯»å–ã€‚

- ä»…é˜»æ­¢å®‰è£…ï¼Œä¸å½±å“å·²å®‰è£…åº”ç”¨çš„è¿è¡Œã€‚

- è¯¥ä¿®æ”¹ä½äºç³»ç»ŸæœåŠ¡å±‚ï¼Œéœ€é‡æ–°ç¼–è¯‘ç³»ç»Ÿæˆ–æ›¿æ¢å¯¹åº”æœåŠ¡ç»„ä»¶ã€‚
