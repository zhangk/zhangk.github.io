---
title: Android 15 屏蔽指定应用通知功能修改记录
slug: 02390e0ec299446eac45fb71298f4037
tags:
  - android
date: 2026-01-27T09:48:15.481Z
---

## 修改目的

为 Android 15 系统中的 `NotificationManagerService` 添加通知屏蔽功能，阻止指定应用包的通知显示。

## 涉及文件

system/frameworks/base/services/core/java/com/android/server/notification/NotificationManagerService.java

## 完整 Diff 内容

```diff
--- a/system/frameworks/base/services/core/java/com/android/server/notification/NotificationManagerService.java
+++ b/system/frameworks/base/services/core/java/com/android/server/notification/NotificationManagerService.java
@@ -749,6 +749,32 @@ public class NotificationManagerService extends SystemService {
 
     private ModuleInfo mAdservicesModuleInfo;
 
+    //kte zhangkai 2026-1-14, jxw applications blocked notifications;
+    private static final Set<String> BLOCKED_NOTIFICATION_PACKAGES = new HashSet<>() {{
+        add("com.jxw.newyouer.video");    // 精品课
+        add("com.jxw.youer.video");       // 幼儿
+        add("com.jxw.singsound");         // 口语评测
+        add("com.jxw.launcher");          // 主程序
+        add("com.jxw.mskt.video");        // 影视厅
+        add("com.jxw.pushservice");       // 远程控制
+        add("com.jxw.appstore");          // 应用商店
+    }};
+
+    private boolean shouldBlockNotification(String packageName) {
+        //boolean shouldBlock = BLOCKED_NOTIFICATION_PACKAGES.contains(packageName);
+        boolean shouldBlock = false;
+        if (packageName.contains("com.jxw") || packageName.contains("com.iflytek")
+                || packageName.contains("pianpangbushou")
+                || packageName.contains("com.tech.translate")) {
+            shouldBlock = true;
+        }
+        if (shouldBlock && DBG) {
+            Slog.d(TAG, "Blocking notification from package: " + packageName);
+        }
+        return shouldBlock;
+    }
+    //kte zhangkai 2026-1-14, jxw applications blocked notifications;
+
     static class Archive {
         final SparseArray<Boolean> mEnabled;
         final int mBufferSize;
@@ -2006,6 +2032,20 @@ public class NotificationManagerService extends SystemService {
                     uidList = new int[] {intent.getIntExtra(Intent.EXTRA_UID, -1)};
                 }
                 if (pkgList != null && (pkgList.length > 0)) {
+                    //kte zhangkai 2026-1-15,T30X DHSD customer filter notification.
+                    if("T30X_DHSD".equals(android.os.SystemProperties.get("ro.kte.customer_project",""))){
+                    // 过滤掉被屏蔽的包
+                    List<String> filteredPkgList = new ArrayList<>();
+                    for (String pkgName : pkgList) {
+                        if (!shouldBlockNotification(pkgName)) {
+                            filteredPkgList.add(pkgName);
+                        }
+                    }
+                    // 使用过滤后的列表
+                    pkgList = filteredPkgList.toArray(new String[0]);
+                    }
+                    //kte zhangkai 2026-1-15,T30X DHSD customer filter notification.
+
                     if (cancelNotifications) {
                         for (String pkgName : pkgList) {
                             cancelAllNotificationsInt(MY_UID, MY_PID, pkgName, null, 0, 0,

```

## 主要修改点

### 1. 添加屏蔽包集合（BLOCKED\_NOTIFICATION\_PACKAGES）

定义了一个 `HashSet`，包含7个以 `com.jxw` 开头的应用包名，例如：

- `com.jxw.newyouer.video`（精品课）

- `com.jxw.launcher`（主程序）

- `com.jxw.pushservice`（远程控制）等。

### 2. 实现屏蔽判断方法 `shouldBlockNotification`

判断逻辑：

- 若包名包含 `"com.jxw"`、`"com.iflytek"`、`"pianpangbushou"` 或 `"com.tech.translate"`，则返回 `true`（屏蔽）。

- 调试模式下会打印屏蔽日志。

### 3. 在通知处理逻辑中插入过滤代码

在 `cancelNotifications` 条件分支前，增加：

- 判断系统属性 `ro.kte.customer_project` 是否为 `"T30X_DHSD"`。

- 若是，遍历传入的包名列表，过滤掉应屏蔽的包。

- 使用过滤后的列表继续后续通知处理。

## 备注

- 屏蔽规则目前为硬编码，后续如有扩展建议使用配置文件或数据库管理。
