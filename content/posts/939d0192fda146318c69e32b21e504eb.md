---
title: rsync 同步命令指南(保留软链接属性)
slug: 939d0192fda146318c69e32b21e504eb
tags:
  - linux
  - android
date: 2025-06-09T05:19:19.085Z
---

## 核心参数说明

`rsync -avrl`

- `-a`：归档模式（保留文件属性）
- `-v`：显示详细过程
- `-r`：递归同步子目录
- `-l`：**保持软链接属性**（不转为实体文件）

***

## 🔌 跨服务器同步（远程 → 本地）

### 命令格式

```bash
rsync -avrl [用户名]@[IP]:[远程路径] [本地目标路径]
```

### 操作示例

```bash
rsync -avrl wuhui@192.168.1.66:/home/wuhui/develop/rk3126c/rk3126cv81/rk3126cv81 rk3126cv81/
```

### 参数说明

| 组件   | 示例值                       | 说明         |
| ---- | ------------------------- | ---------- |
| 用户名  | `wuhui`                   | 远程服务器账号    |
| IP   | `192.168.1.66`            | 远程服务器地址    |
| 远程路径 | `/home/wuhui/develop/...` | 源文件位置      |
| 本地路径 | `rk3126cv81/`             | 目标目录（自动创建） |

***

## 💻 本机目录同步（本地 → 本地）

### 命令格式

```bash
rsync -avrl [源路径] [目标路径]
```

### 操作示例

```bash
# 同步整个目录
rsync -avrl ~/project/src /backup/project/

# 仅同步目录内容（注意末尾斜杠）
rsync -avrl ~/project/src/ /backup/project/
```

## ⚠️ 关键注意事项

### 路径斜杠规则

| 源路径格式  | 效果      | 示例            |
| ------ | ------- | ------------- |
| `dir`  | 同步整个目录  | 目标生成 `目标/dir` |
| `dir/` | 同步目录内文件 | 目标生成 `目标/文件`  |

### 权限要求

- 远程操作需配置 **SSH 免密登录**

- 本地目录需有读写权限

### 增量同步特性

- 默认仅传输修改过的文件（高效节省时间）

***

## 🚀 高级技巧

```bash
# 排除特定文件/目录
rsync -avrl --exclude='*.log' --exclude='tmp/' /path/from /path/to

# 限速传输（单位 KB/s）
rsync -avrl --bwlimit=1000 user@remote:/path/from /path/to

# 强制软链接转实体文件（替换 -l 参数）
rsync -avrL /path/from /path/to
```

💡 **使用提示**：首次同步建议先添加 `-n` 参数（`rsync -anvrl`）模拟运行，确认无误后再移除 `-n` 执行实际同步。
