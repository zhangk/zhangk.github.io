---
title: Miniconda3 多Python版本管理
slug: 3186e3b273de4919a60ccc44c92a2e94
tags:
  - python
  - linux
date: 2025-08-04T07:29:43.364Z
---

## 安装Miniconda3

```bash
# 创建目录并下载安装脚本
mkdir -p ~/miniconda3
wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda3/miniconda.sh

# 静默安装（无需交互确认）
bash ~/miniconda3/miniconda.sh -b -u -p ~/miniconda3
rm ~/miniconda3/miniconda.sh

# 初始化conda
source ~/miniconda3/bin/activate
conda init --all
source ~/.bashrc
```

## 创建Python 2.7环境

```bash
conda tos accept --override-channels --channel https://repo.anaconda.com/pkgs/main
conda tos accept --override-channels --channel https://repo.anaconda.com/pkgs/r

conda create -n py27 python=2.7 -y
```

## 环境切换配置

编辑`~/.bashrc`文件，添加以下别名：

```bash
# Conda环境快捷命令
alias py2="conda activate py27"       # 切换到Python2.7环境
alias py3="conda activate base"       # 切换到默认Python3环境
alias conda-off="conda deactivate"    # 退出所有conda环境

# 可选：设置启动时不自动激活base环境
conda config --set auto_activate false
```

应用配置：

```bash
source ~/.bashrc
```

## 使用示例

| 命令               | 功能             |
| ---------------- | -------------- |
| `py2`            | 进入Python 2.7环境 |
| `py3`            | 返回Python 3基础环境 |
| `conda-off`      | 完全退出conda环境    |
| `conda env list` | 查看所有可用环境       |

## 验证环境

```bash
# 切换到Python2
py2
python --version  # 应显示Python 2.7.x

# 切换到Python3
py3
python --version  # 应显示Python 3.x.x
```

## 注意事项

1. 首次安装后需要重启终端或执行`source ~/.bashrc`

2. 所有`conda`命令需在conda基础环境下运行

3. 安装Python2包时使用：`conda install -n py27 [包名]`

4. 可通过`conda update -n base conda`更新conda自身
