---
layout: post
title: 解决 Ubuntu 解压 ZIP 文件中文乱码问题
abbrlink: 92b057cf12874775acc96bbf159755b5
tags:
  - zip
  - linux
categories:
  - Linux
date: 1749516073253
updated: 1749516247279
---

## 问题现象

在 Ubuntu 中解压 Windows 生成的 ZIP 压缩包时，中文文件名/内容显示为乱码

## 核心解决方案

```bash
unzip -O cp936 文件名.zip
```

- **`-O cp936`**：指定简体中文编码（GBK）

- 适用于大多数 Windows 创建的 ZIP 压缩包

***

## 替代方案（当 `-O` 选项不可用时）

### 方法 1：使用 `unar` 工具（推荐）

```bash
# 安装 unar
sudo apt install unar

# 解压并自动转码
unar 文件名.zip
```

### 方法 2：Python 脚本转换

```python
#!/usr/bin/env python3
import sys
from zipfile import ZipFile

with ZipFile(sys.argv[1]) as zipf:
    for name in zipf.namelist():
        utf8_name = name.encode('cp437').decode('gbk')
        zipf.extract(name, path=sys.argv[2])
        os.rename(os.path.join(sys.argv[2], name), 
                  os.path.join(sys.argv[2], utf8_name))
```

保存为 `unzip-gbk.py` 后使用：\
`python3 unzip-gbk.py 文件名.zip 输出目录`

***

## 永久解决方案（环境配置）

### 方案 1：修改环境变量（临时生效）

```bash
export UNZIP="-O cp936"
export ZIPINFO="-O cp936"
```

### 方案 2：创建别名（推荐）

编辑 `~/.bashrc`：

```bash
alias unzip="unzip -O cp936"
alias zipinfo="zipinfo -O cp936"
```

生效配置：\
`source ~/.bashrc`

***

## ⚠️ 注意事项

1. **编码验证**：

   ```bash
   file -i 文件名.zip  # 查看实际编码
   ```

2. **常见编码对应**：

   - 简体中文：`cp936` (GBK)

   - 繁体中文：`cp950` (Big5)

   - 日文：`cp932` (Shift-JIS)

3. **7z 解决方案**：

   ```bash
   7z x -oGBK 文件名.zip
   ```

> **最佳实践**
>
> 1. 优先安装 `unar` 工具（支持 30+ 种编码自动检测）
> 2. 频繁处理 Windows 压缩包时配置别名
> 3. 重要文件先测试：`unzip -t -O cp936 文件名.zip`
